<div align="center">
<img width="150" height="150" src="https://raw.githubusercontent.com/sang765/ArchiveTune-Nightly/main/images/logo.gif" alt="Archivetune">

# <img width="30" height="30" src="https://github.com/koiverse/ArchiveTune/blob/main/fastlane/metadata/android/en-US/images/icon.png" alt="Archivetune"> ArchiveTune Nightly <img width="30" height="30" src="https://github.com/koiverse/ArchiveTune/blob/main/fastlane/metadata/android/en-US/images/icon.png" alt="Archivetune">
**CI build for Nightly version of [ArchiveTune](https://github.com/koiverse/ArchiveTune). Redefining the YouTube Music Experience on Android.**  
üïõ Runs at <b><code>0:00 AM</code></b> every day, **UTC 0** time zone üïõ

<sub>Don't forget to leave a ‚≠ê for this repository if you visit. Thank you so much ‚ô•Ô∏è</sub>

[![GitHub Actions Workflow Status](https://img.shields.io/github/actions/workflow/status/sang765/ArchiveTune-Nightly/nightly-build.yml?branch=main&style=for-the-badge&logo=github&label=Status)](https://github.com/sang765/ArchiveTune-Nightly/actions/workflows/nightly-build.yml)
[![GitHub Stars](https://img.shields.io/github/stars/sang765/ArchiveTune-Nightly?style=for-the-badge&color=6366f1&labelColor=1e1e2e&logo=github)](https://github.com/sang765/ArchiveTune-Nightly)
[![GitHub Downloads (all assets, latest release)](https://img.shields.io/github/downloads/sang765/ArchiveTune-Nightly/total?style=for-the-badge&logo=Github&label=NIGHTLY%20DOWNLOAD&color=ff00ff)](https://github.com/sang765/ArchiveTune-Nightly/releases)  
<img src="images/badges/last-nightly-build.svg" alt="Last Nightly Build" style="height: 28px;">

</div>

<h4 align="center">Download</h4>

<div align="center">

| Stable | Nightly |
|----------|---------|
| <div align="center"> [![Stable build](https://img.shields.io/github/actions/workflow/status/koiverse/ArchiveTune/release.yml?labelColor=27303D&label=Stable&labelColor=06599d&color=043b69)](https://github.com/koiverse/ArchiveTune/actions/workflows/release.yml) <br> [![GitHub downloads](https://img.shields.io/github/downloads/koiverse/ArchiveTune/latest/total?label=Latest%20Downloads&labelColor=27303D&color=0D1117&logo=github&logoColor=FFFFFF&style=flat)](https://github.com/koiverse/ArchiveTune/releases/latest) [![GitHub downloads](https://img.shields.io/github/downloads/koiverse/ArchiveTune/total?label=Total%20Downloads&labelColor=27303D&color=0D1117&logo=github&logoColor=FFFFFF&style=flat)](https://github.com/koiverse/ArchiveTune/releases) </div> | <div align="center"> [![Nightly build](https://img.shields.io/github/actions/workflow/status/sang765/ArchiveTune-Nightly/nightly-build.yml?labelColor=27303D&label=Nightly&labelColor=2c2c47&color=1c1c39)](https://github.com/sang765/ArchiveTune-Nightly/actions/workflows/nightly-build.yml) <br> [![GitHub downloads](https://img.shields.io/github/downloads/sang765/ArchiveTune-Nightly/latest/total?label=Latest%20Downloads&labelColor=27303D&color=0D1117&logo=github&logoColor=FFFFFF&style=flat)](https://github.com/sang765/ArchiveTune-Nightly/releases/latest) [![GitHub downloads](https://img.shields.io/github/downloads/sang765/ArchiveTune-Nightly/total?label=Total%20Downloads&labelColor=27303D&color=0D1117&logo=github&logoColor=FFFFFF&style=flat)](https://github.com/sang765/ArchiveTune-Nightly/releases) </div> |

</div>

> [!WARNING]
> - This is **unofficial** Nightly build of AchieveTune. If you wanna download official ArchiveTune, please check out this [repository](https://github.com/koiverse/ArchiveTune).

This repository contains the nightly build setup for ArchiveTune, an advanced YouTube Music client for Android. Read bellow to read more about this app.

<div align="center">

## ‚ÑπÔ∏è [ArchiveTune](https://github.com/koiverse/ArchiveTune) [README](https://raw.githubusercontent.com/koiverse/ArchiveTune/main/README.md) ‚ÑπÔ∏è

</div>

<div align="center">

  <img src="https://github.com/koiverse/ArchiveTune/blob/main/fastlane/metadata/android/en-US/images/icon.png" width="160" height="160" alt="ArchiveTune Logo" style="border-radius: 22%">

  <h1>ArchiveTune</h1>

  <p align="center">
    <strong>Redefining the YouTube Music Experience on Android.</strong>
    <br />
    <em>It‚Äôs high-performance, totally private, and packed with features for people who really care about their experience.</em>
  </p>

  <p align="center">
    <a href="https://archivetune.koiiverse.cloud"><b>Official Website</b></a> ‚Ä¢
    <a href="#-key-highlights"><b>Features</b></a> ‚Ä¢
    <a href="#-installation"><b>Download</b></a> ‚Ä¢
    <a href="#-showcase"><b>Showcase</b></a> ‚Ä¢
    <a href="https://github.com/koiverse/ArchiveTune/issues/new/choose"><b>Support</b></a>
  </p>

  <div align="center">
    <img src="https://img.shields.io/github/v/release/koiverse/ArchiveTune?style=for-the-badge&color=6366f1&labelColor=1e1e2e&logo=github" alt="Latest Version" />
    <img src="https://img.shields.io/github/downloads/koiverse/ArchiveTune/total?style=for-the-badge&color=6366f1&labelColor=1e1e2e&logo=github" alt="Downloads" />
    <img src="https://img.shields.io/github/stars/koiverse/ArchiveTune?style=for-the-badge&color=6366f1&labelColor=1e1e2e&logo=github" alt="Stars" />
    <img src="https://img.shields.io/github/license/koiverse/ArchiveTune?style=for-the-badge&color=6366f1&labelColor=1e1e2e" alt="License" />
    <img src="https://img.shields.io/badge/Architecture-MVVM-6366f1?style=for-the-badge&labelColor=1e1e2e&logo=kotlin" alt="MVVM Architecture" />
    <img src="https://img.shields.io/badge/Language-Kotlin-7f52ff?style=for-the-badge&logo=kotlin&color=6366f1&labelColor=1e1e2e" alt="Kotlin Language" />
    <img src="https://img.shields.io/badge/Toolkit-Jetpack_Compose-4285f4?style=for-the-badge&logo=jetpack-compose&color=6366f1&labelColor=1e1e2e" alt="Jetpack Compose Toolkit" />
    <img src="https://img.shields.io/badge/Design-Material_3-000000?style=for-the-badge&logo=material-design&color=6366f1&labelColor=1e1e2e" alt="Material Design 3" />
  </div>
  
  <br />

  <a href="https://trendshift.io/repositories/17521" target="_blank">
    <img src="https://trendshift.io/api/badge/repositories/17521" alt="ArchiveTune | Trendshift" style="width: 250px; height: 55px;" width="250" height="55"/>
  </a>
</div>

<hr />

**ArchiveTune** isn't just another generic YouTube Music wrapper. It‚Äôs a totally custom player built from scratch because we believe your music should be private, look great, and work exactly how you expect. If you care about audio quality and want an app that actually looks good, this is the one.

---

## üöÄ The Essentials
* **No Ads, Ever:** Seriously, just your music. No interruptions, no banner ads.
* **Plays Nice with Your Library:** All your playlists, liked songs, and subs are right there the second you open the app.
* **Smart & Efficient:** It loads fast without eating up all your data, and it keeps playing in the background without killing your battery.

## üéöÔ∏è For the Audiophiles
* **No More Volume Jumps:** We‚Äôve leveled the audio (using standard EBU R128 stuff) so you aren't constantly reaching for the volume knob between tracks.
* **Total Control:** Want to speed it up, slow it down, or change the pitch? You can tweak all that on the fly.
* **Butter-Smooth Transitions:** The crossfade is great‚Äîno awkward silence between songs, just a seamless flow.
* **Works with Your System:** It hooks right into your phone‚Äôs built-in equalizer and spatial audio settings, so you don't have to fight with the settings.

## üé® Looks & Lyrics
* **Matches Your Vibe:** The whole app changes colors to match the album art of whatever you're playing (Material You).
* **Sing Along:** Perfectly synced lyrics that scroll with the song‚Äîwe've even got translations and romanization if you need them.
* **Know Your Stats:** You don't have to wait until December; check your "Year in Review" and listening stats literally whenever you want.

## ‚öôÔ∏è The Social Stuff
* **Keep Your History:** Auto-syncs your listening history with Last.fm and Listenbrainz so your stats are always up to date.
* **Show It Off:** Let your friends on Discord see exactly what you‚Äôre jamming to with custom rich presence.

---

## üì∏ Showcase

<div align="center">
  <img src="https://raw.githubusercontent.com/koiverse/ArchiveTune/refs/heads/dev/fastlane/metadata/android/en-US/images/ArchiveTuneBanner.png" alt="ArchiveTune Banner" style="width: 100%; max-width: 400px; border-radius: 12px;">
  <table border="0">
    <tr>
      <td><img src="https://github.com/koiverse/ArchiveTune/blob/main/fastlane/metadata/android/en-US/images/phoneScreenshots/screenshot_1.jpg" width="180" style="border-radius: 12px;"></td>
      <td><img src="https://github.com/koiverse/ArchiveTune/blob/main/fastlane/metadata/android/en-US/images/phoneScreenshots/screenshot_2.jpg" width="180" style="border-radius: 12px;"></td>
      <td><img src="https://github.com/koiverse/ArchiveTune/blob/main/fastlane/metadata/android/en-US/images/phoneScreenshots/screenshot_3.jpg" width="180" style="border-radius: 12px;"></td>
      <td><img src="https://github.com/koiverse/ArchiveTune/blob/main/fastlane/metadata/android/en-US/images/phoneScreenshots/screenshot_4.jpg" width="180" style="border-radius: 12px;"></td>
      <td><img src="https://github.com/koiverse/ArchiveTune/blob/main/fastlane/metadata/android/en-US/images/phoneScreenshots/screenshot_5.jpg" width="180" style="border-radius: 12px;"></td>
      <td><img src="https://github.com/koiverse/ArchiveTune/blob/main/fastlane/metadata/android/en-US/images/phoneScreenshots/screenshot_6.jpg" width="180" style="border-radius: 12px;"></td>
    </tr>
    <tr align="center">
      <td><sub>Player</sub></td>
      <td><sub>Live Lyrics</sub></td>
      <td><sub>Theme Customization</sub></td>
      <td><sub>Live Statistics</sub></td>
      <td><sub>Artist</sub></td>
      <td><sub>Album</sub></td>
    </tr>
  </table>
</div>

---

## üì• Installation

<table>
  <tr>
    <td align="center">
      <a href="https://github.com/koiverse/ArchiveTune/releases/latest">
        <img src="https://raw.githubusercontent.com/koiverse/ArchiveTune/refs/heads/main/assets/badge_github.png" height="40" alt="Get it on GitHub">
      </a>
    </td>
    <td align="center">
      <a href="https://apt.izzysoft.de/fdroid/index/apk/moe.koiverse.archivetune">
        <img src="https://raw.githubusercontent.com/koiverse/ArchiveTune/757d5932832e1da27ced56de98c5ad1275cf0db1/assets/IzzyOnDroidButtonBorder.svg" height="40" alt="Get it on IzzyOnDroid">
      </a>
    </td>
    <td align="center">
      <a href="https://www.openapk.net/archivetune/moe.koiverse.archivetune/">
        <img src="https://www.openapk.net/images/openapk-badge.png" height="60" alt="Get it on OpenAPK">
      </a>
    </td>
    <td align="center">
      <a href="https://m.doyo.cn/app/539242.html">
        <img src="https://raw.githubusercontent.com/koiverse/ArchiveTune/refs/heads/dev/assets/badge_doyo.png" height="40" alt="Get it on Doyo.cn">
      </a>
    </td>
  </tr>
</table>


## ‚ùì Need Help or Have Questions?
Join Our Telegram Channels for Support and Discussion.

[![Telegram](https://img.shields.io/badge/Telegram-2CA5E0?style=for-the-badge&logo=telegram&logoColor=white)](https://t.me/ArchiveTuneGC)


> [!IMPORTANT]  
> **Geographic Availability:** If YouTube Music is not supported in your region, a VPN or Proxy set to a supported region is required for initial data fetching.

---

## üåç Globalization

ArchiveTune belongs to everyone. Help us localize the experience for your region.

<div align="center">
  <a href="https://translate.codeberg.org/engage/archivetune/">
    <img src="https://translate.codeberg.org/widget/archivetune/horizontal-blue.svg" alt="Translation status" />
  </a>
</div>

### ‚ú® Project Contributors
<a href="https://github.com/koiverse/ArchiveTune/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=koiverse/ArchiveTune" />
</a>

### üõ†Ô∏è Development & Engineering
Interested in building the project or contributing? ArchiveTune is built on a high-performance Kotlin stack.
<a href="CONTRIBUTING.md"><b>Read the Build & Contribution Guide ‚Üí</b></a>

---

## ü§ù Acknowledgments

We stand on the shoulders of open-source giants:
- **Metrolist** by [Mostafa Alagamy](https://github.com/mostafaalagamy/Metrolist) For Base framework.
- **Kizzy** by [dead8309](https://github.com/dead8309/Kizzy) For Discord Integration.
- **SimpMusic** by [maxrave-dev](https://github.com/maxrave-dev/SimpMusic) For Lyrics API Provider.
- [BetterLyrics](https://better-lyrics.boidu.dev/) For word-by-word Lyrics API Provider & Artwork Provider.
- [Material Color Utilities](https://github.com/material-foundation/material-color-utilities)
- [Read You](https://github.com/Ashinch/ReadYou) and [Seal](https://github.com/JunkFood02/Seal) for Ui Components.
- The global community of translators and beta testers.

---

## ‚öñÔ∏è Legal Disclaimer

ArchiveTune is an independent third-party client.
- Not affiliated with Google LLC or YouTube.
- Does not bypass YouTube's technical protections.
- Users are encouraged to support artists by purchasing music via official channels.

---

<div align="center">
  <img src="https://raw.githubusercontent.com/koiverse/ArchiveTune/refs/heads/dev/fastlane/metadata/android/en-US/images/ArchiveTuneFull.png" alt="ArchiveTune Banner" style="width: 100%; max-width: 500px;">
  <p><b>If ArchiveTune elevated your music experience, please consider giving us a ‚≠ê</b></p>
  <br />
  Made with üíú by <strong>Koiverse</strong>
</div>


<div align="center">

## üë• [ArchiveTune](https://github.com/koiverse/ArchiveTune) [CONTRIBUTING](https://raw.githubusercontent.com/koiverse/ArchiveTune/dev/CONTRIBUTING.md) üë•

</div>

# üõ†Ô∏è Engineering & Build Guide

This document defines the protocols for setting up the development environment, understanding the underlying technology stack, and compiling **ArchiveTune** from the source.

---

## üèóÔ∏è Operational Readiness

To ensure build stability and environment parity, the following hardware and software configurations are mandatory.

### **Development Environment**

* **IDE:** [Android Studio](https://developer.android.com/studio) **Ladybug (2024.2.1) or newer**.
* **Java Runtime:** **JDK 17** (Amazon Corretto or Azul Zulu recommended for deterministic builds).
* **Android SDK:** API Level 34+ (Upside Down Cake).
* **Version Control:** Git 2.40+.

### **Technical DNA (Skill Requirements)**

The ArchiveTune codebase is built on a modern, reactive architecture. Contributors are expected to have a high level of familiarity with:

* **Kotlin (Advanced):** Proficiency in Coroutines, Flow API, and functional paradigms.
* **Jetpack Compose:** Understanding of State Hoisting, Recomposition optimization, and Material 3 design systems.
* **Gradle (KTS):** Ability to navigate Kotlin DSL build scripts and Version Catalogs (`libs.versions.toml`).
* **Modern Android Architecture:** Deep understanding of MVVM, Repository patterns, and UDF (Unidirectional Data Flow).

---

## üìê Architectural Manifesto

ArchiveTune follows a strict **Clean Architecture** approach. This separation of concerns ensures that the audio engine remains independent of the UI layer.

1. **UI Layer (Compose):** Handles user interactions and renders state emitted by ViewModels.
2. **Domain Layer:** Contains business logic, Use Cases, and high-level audio processing interfaces.
3. **Data Layer:** Manages the single source of truth‚Äîcoordinating between the YouTube Music API (Retrofit) and the local encrypted cache (Room).
4. **Service Layer (Media3):** A specialized background layer managing the `MediaSession` and low-latency audio pipelines.

---

## üöÄ Environment Initialization

1. **Clone the Source:**
```bash
git clone https://github.com/koiverse/ArchiveTune.git
cd ArchiveTune

```


2. **Secret Management:**
ArchiveTune uses a modular properties system. If your build requires specific API keys (e.g., Discord Client IDs), define them in your `local.properties`:
```properties
# Path to your Android SDK
sdk.dir=/Users/yourname/Library/Android/sdk

```


3. **Syncing the Core:**
Open the project in Android Studio. The IDE will automatically trigger a Gradle sync. We use **Version Catalogs** to ensure all dependencies (Media3, Hilt, Compose) are locked to tested versions.

---

## üì¶ Build Pipelines

Use the Gradle Wrapper to execute verified build scripts.

| Command | Output | Context |
| --- | --- | --- |
| `./gradlew assembleDebug` | `app-debug.apk` | Local testing & feature development. |
| `./gradlew assembleRelease` | `app-release.apk` | Production-ready, R8-optimized build. |
| `./gradlew bundleRelease` | `app-release.aab` | Optimized bundle for distribution. |
| `./gradlew clean` | `N/A` | Flushes build cache to resolve sync issues. |

---

## üõ°Ô∏è Code Quality & Static Analysis

Before initiating a Pull Request, every contributor must run the following quality gates:

* **Linting:** `./gradlew lintDebug` (Ensures adherence to Android XML/Compose standards).
* **Formatting:** `./gradlew ktlintCheck` (Ensures consistent Kotlin styling).
* **Logic Verification:** `./gradlew testDebugUnitTest` (Runs the architectural unit tests).

---

## ‚öñÔ∏è Troubleshooting

> [!IMPORTANT]
> **Heap Memory:** If you experience `GC overhead limit exceeded`, ensure your `gradle.properties` has sufficient memory allocated:
> `org.gradle.jvmargs=-Xmx4g -XX:MaxMetaspaceSize=1g`

> [!WARNING]
> **Compose Compiler:** If the build fails due to a Compose version mismatch, verify that the `kotlinCompilerExtensionVersion` in the build script matches the current Kotlin version.

---

<div align="center">
<sub>ArchiveTune: Engineering audio freedom. Part of the <strong>Koiverse</strong> ecosystem.</sub>
</div>

<div align="center">

## üõ†Ô∏è Development Environment üõ†Ô∏è

</div>

This project is set up for development in Firebase Studio (IDX) with Nix environment configuration.

<div align="center">

### üí¨ Requirements üí¨

</div>

**Repository secrets:**  
- `SIGNING_KEY_BASE64`: Your key convent to base64 strings. You can converter your key into base64 with this command.  
```bash
openssl base64 < YOUR_SIGN_KEY_NAME_HERE.jks | tr -d '\n' | tee YOUR_SIGN_KEY_NAME_HERE.jks.base64
```
- `KEYSTORE_PASSWORD`: Password for your keystore
- `KEY_ALIAS`: Alias for your keystore
- `KEY_PASSWORD`: Password for your key
- `LASTFM_API_KEY` and `LASTFM_SECRET`: last.fm API key and Secret key for "Integrated last.fm" allow you login last.fm inside app. Checkout [API document](https://www.last.fm/api).
- `PAT_TOKEN`: your "[Personal Access Token](https://github.com/settings/personal-access-tokens)" for follow permission
```diff
+ "Actions" for trigger/running workflow.
+ "Contents" for commit, push and create release.
+ "Workflows" for cancel workflows if build failed (optional).
```


- Firebase Studio (IDX) workspace or VSCode
- [openssl](https://github.com/openssl/openssl/blob/master/INSTALL.md#installation-steps-in-detail) for coventer your key to base64
- keytool: You can use Java to have keytool command.
- Android SDK (configured via Nix)

<div align="center">

### ‚úàÔ∏è Setup ‚úàÔ∏è

</div>

1. Open this repository in Firebase Studio
2. The `.idx/dev.nix` file defines the development environment with Android tools
3. Customize the environment as needed for your development workflow

<div align="center">

### ‚öíÔ∏è Build ‚öíÔ∏è

</div>

- ~~Use `./gradlew` commands in the `ArchiveTune/` directory~~
- For nightly builds, see `.github/workflows/nightly-build.yml`

<div align="center">

### üîó Links üîó

</div>

- Latest dev build in **ArchiveTune** repository:  
  [![Latest Dev Branch Workflow Build](https://img.shields.io/github/actions/workflow/status/koiverse/ArchiveTune/build.yml?branch=dev&style=for-the-badge&logo=githubactions&logoColor=ffffff&label=Last%20DEV%20Build&labelColor=1e1e2e&color=6366f1)](https://github.com/koiverse/ArchiveTune/actions/workflows/build.yml?query=branch%3Adev)
- [ArchiveTune Repository](https://github.com/koiverse/ArchiveTune)
- [Firebase Studio Documentation](https://developers.google.com/idx/guides/customize-idx-env)
